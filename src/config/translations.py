TRANSLATIONS = {
    "en": {
        "page_title": "AI Legal Reasoning System",
        "header_title": "Finnish Legal Reasoning",
        "header_subtitle": "Ask about statutes, case law, and regulations in Finnish or English.",
        "ask_question": "Ask a question",
        "send": "Send",
        "welcome_title": "Welcome",
        "welcome_body": "Ask your question below. I can help with Finnish legislation, Supreme Court (KKO) and Supreme Administrative Court (KHO) case law, and legal definitions — in Finnish or English.",
        "input_hint": "Ask about Finnish law in Finnish or English. Press Enter to send.",
        "placeholder": "Ask me about Finnish legal documents.",
        "settings": "Settings",
        "sidebar_app_name": "Legal Assistant",
        "sidebar_tagline": "Finnish law & case law (KKO, KHO)",
        "language": "Language",
        "clear_chat": "Clear chat",
        "system": "System",
        "messages_count": "Questions asked: {count}",
        "spinner_searching": "Searching knowledge base...",
        "stream_analyzing": "Analyzing question...",
        "stream_searching": "Searching...",
        "stream_reformulating": "No results found. Refining search: '{query}'...",
        "stream_relevancy": "Relevancy: {score}/5. {reason}",
        "stream_relevancy_short": "Relevancy: {score}/5.",
        "stream_error": "Error: {error}",
        "stream_connection_error": "Connection error: {error}",
        "error_search_connection": "Search unavailable. Please check your internet connection and try again.",
        "error_search_timeout": "Search timed out. The server may be busy. Please try again.",
        "error_search_api": "Search failed due to an external service error. Please try again later.",
        "query_too_long": "Query too long (max {max} characters). Please shorten your question.",
        "year_clarification": "Which years' court decisions would you like to search? Specify a range (e.g. 2010–2020) or say 'all' for no filter.",
        "templates_heading": "Example questions",
        "templates_hint": "Click to add to input field — edit, then press Enter to search.",
        "edit_template_label": "Edit your question",
        "cancel": "Cancel",
        "prompt_guide_title": "How to write good prompts",
        "prompt_guide_tip1": "Be specific (e.g. 'fraud cases 2015–2020')",
        "prompt_guide_tip2": "Use legal terms: petos, varkaus, vahingonkorvaus",
        "prompt_guide_tip3": "Ask for a case: 'Summarize KKO:2024:76'",
        "prompt_guide_tip4": "Follow-ups: agent interprets context, no fixed phrases",
    },
    "fi": {
        "page_title": "Tekoälypohjainen oikeudellinen päättelyjärjestelmä",
        "header_title": "Suomalainen oikeudellinen päättely",
        "header_subtitle": "Kysy säädöksistä, oikeuskäytännöstä ja määräyksistä suomeksi tai englanniksi.",
        "ask_question": "Esitä kysymys",
        "send": "Lähetä",
        "welcome_title": "Tervetuloa",
        "welcome_body": "Esitä kysymyksesi alla. Voin auttaa Suomen lainsäädännössä, KKO- ja KHO-oikeuskäytännössä sekä oikeudellisissa määritelmissä — suomeksi tai englanniksi.",
        "input_hint": "Kysy Suomen lainsäädännöstä suomeksi tai englanniksi. Paina Enter lähettääksesi.",
        "placeholder": "Tervetuloa! Kysy minulta Suomen lainsäädännöstä.",
        "settings": "Asetukset",
        "sidebar_app_name": "Oikeudellinen avustaja",
        "sidebar_tagline": "Suomen laki ja oikeuskäytäntö (KKO, KHO)",
        "language": "Kieli",
        "clear_chat": "Tyhjennä keskustelu",
        "system": "Järjestelmä",
        "messages_count": "Esitetyt kysymykset: {count}",
        "spinner_searching": "Haetaan tietokannasta...",
        "stream_analyzing": "Analysoidaan kysymystä...",
        "stream_searching": "Etsitään tietoa...",
        "stream_reformulating": "Hakutuloksia ei löytynyt. Tarkennetaan hakua: '{query}'...",
        "stream_relevancy": "Relevanssi: {score}/5. {reason}",
        "stream_relevancy_short": "Relevanssi: {score}/5.",
        "stream_error": "Virhe: {error}",
        "stream_connection_error": "Virhe yhteydessä: {error}",
        "error_search_connection": "Hakutta ei saatavilla. Tarkista internetyhteytesi ja yritä uudelleen.",
        "error_search_timeout": "Hakutimeutuksen aikakatkaisu. Palvelin voi olla kuormitettu. Yritä uudelleen.",
        "error_search_api": "Hakutiedustelu epäonnistui ulkoisen palvelun virheen vuoksi. Yritä myöhemmin uudelleen.",
        "query_too_long": "Kysymys on liian pitkä (max {max} merkkiä). Lyhennä kysymystäsi.",
        "year_clarification": "Miltä vuosiluvuilta etsit tuomioistuimen päätöksiä? Anna väli (esim. 2010–2020) tai sano 'kaikki' ilman rajoitusta.",
        "templates_heading": "Esimerkkikysymykset",
        "templates_hint": "Klikkaa lisätäksesi syöttökenttään — muokkaa ja paina Enter.",
        "edit_template_label": "Muokkaa kysymystäsi",
        "cancel": "Peruuta",
        "prompt_guide_title": "Kuinka kirjoittaa tehokkaita kysymyksiä",
        "prompt_guide_tip1": "Ole tarkka (esim. 'petostapaukset 2015–2020')",
        "prompt_guide_tip2": "Käytä oikeustermejä: petos, varkaus, vahingonkorvaus",
        "prompt_guide_tip3": "Kysy tiettyä tapausta: 'Tiivistä KKO:2024:76'",
        "prompt_guide_tip4": "Seurauskysymykset: agentti tulkitsee kontekstin",
    },
    "sv": {
        "page_title": "AI Rättsligt Resonemangssystem",
        "header_title": "Finskt rättsligt resonemang",
        "header_subtitle": "Fråga om lagar, rättspraxis och förordningar på finska eller engelska.",
        "ask_question": "Ställ en fråga",
        "send": "Skicka",
        "welcome_title": "Välkommen",
        "welcome_body": "Ställ din fråga nedan. Jag kan hjälpa till med finsk lagstiftning, KKO- och KHO-rättspraxis samt rättsliga definitioner — på finska eller engelska.",
        "input_hint": "Fråga om finsk lag på finska eller engelska. Tryck Enter för att skicka.",
        "placeholder": "Välkommen! Fråga mig om finsk lagstiftning.",
        "settings": "Inställningar",
        "sidebar_app_name": "Juridisk assistent",
        "sidebar_tagline": "Finsk lag och rättspraxis (KKO, KHO)",
        "language": "Språk",
        "clear_chat": "Rensa chatt",
        "system": "System",
        "messages_count": "Ställda frågor: {count}",
        "spinner_searching": "Söker i kunskapsbasen...",
        "stream_analyzing": "Analyserar frågan...",
        "stream_searching": "Söker...",
        "stream_reformulating": "Inga sökresultat. Förfinar sökningen: '{query}'...",
        "stream_relevancy": "Relevans: {score}/5. {reason}",
        "stream_relevancy_short": "Relevans: {score}/5.",
        "stream_error": "Fel: {error}",
        "stream_connection_error": "Anslutningsfel: {error}",
        "error_search_connection": "Sökningen är inte tillgänglig. Kontrollera din internetanslutning och försök igen.",
        "error_search_timeout": "Sökningen tog slut på tiden. Servern kan vara upptagen. Försök igen.",
        "error_search_api": "Sökningen misslyckades på grund av ett externt tjänstfel. Försök igen senare.",
        "query_too_long": "Frågan är för lång (max {max} tecken). Förkorta din fråga.",
        "year_clarification": "Vilka år vill du söka domstolsbeslut från? Ange ett intervall (t.ex. 2010–2020) eller säg 'allt' utan filter.",
        "templates_heading": "Exempelfrågor",
        "templates_hint": "Klicka för att lägga till i fältet — redigera och tryck Enter.",
        "edit_template_label": "Redigera din fråga",
        "cancel": "Avbryt",
        "prompt_guide_title": "Hur man skriver bra frågor",
        "prompt_guide_tip1": "Var specifik (t.ex. 'bedrägerimål 2015–2020')",
        "prompt_guide_tip2": "Använd juridiska termer: petos, varkaus, vahingonkorvaus",
        "prompt_guide_tip3": "Fråga om ett fall: 'Sammanfatta KKO:2024:76'",
        "prompt_guide_tip4": "Följdfrågor: agenten tolkar kontext",
    },
}

LANGUAGE_OPTIONS = {"Auto": "auto", "English": "en", "Suomi": "fi", "Svenska": "sv"}
DEFAULT_LANGUAGE = "en"


def t(key: str, lang: str = None, **kwargs) -> str:
    if lang is None:
        lang = DEFAULT_LANGUAGE
    text = TRANSLATIONS.get(lang, TRANSLATIONS[DEFAULT_LANGUAGE]).get(key, key)
    if kwargs:
        text = text.format(**kwargs)
    return text
