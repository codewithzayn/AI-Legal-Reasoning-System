TRANSLATIONS = {
    "en": {
        "page_title": "LexAI - Finnish Legal Assistant",
        "header_title": "Finnish Legal Reasoning",
        "header_subtitle": "Ask about statutes, case law, and regulations in Finnish or English.",
        "ask_question": "Ask a question",
        "send": "Send",
        "welcome_title": "Welcome",
        "welcome_body": "Ask your question below. I can help with Finnish legislation, Supreme Court (KKO) and Supreme Administrative Court (KHO) case law, and legal definitions — in Finnish or English.",
        "input_hint": "Ask about Finnish law in Finnish or English. Press Enter to send.",
        "placeholder": "Ask me about Finnish legal documents.",
        "settings": "Settings",
        "sidebar_app_name": "LexAI",
        "sidebar_tagline": "Finnish law & case law (KKO, KHO)",
        "language": "Language",
        "clear_chat": "Clear chat",
        "system": "System",
        "messages_count": "Questions asked: {count}",
        "spinner_searching": "Searching knowledge base...",
        "stream_analyzing": "Analyzing question...",
        "stream_searching": "Searching...",
        "stream_reformulating": "No results found. Refining search: '{query}'...",
        "stream_relevancy": "Relevancy: {score}/5. {reason}",
        "stream_relevancy_short": "Relevancy: {score}/5.",
        "stream_error": "Error: {error}",
        "stream_connection_error": "Connection error: {error}",
        "error_search_connection": "Search unavailable. Please check your internet connection and try again.",
        "error_search_timeout": "Search timed out. The server may be busy. Please try again.",
        "error_search_api": "Search failed due to an external service error. Please try again later.",
        "query_too_long": "Query too long (max {max} characters). Please shorten your question.",
        "year_clarification": "Which years' court decisions would you like to search? Specify a range (e.g. 2010\u20132020) or say 'all' for no filter.",
        "templates_heading": "Example questions",
        "templates_hint": "Click to add to input field \u2014 edit, then press Enter to search.",
        "edit_template_label": "Edit your question",
        "cancel": "Cancel",
        "prompt_guide_title": "How to write good prompts",
        "prompt_guide_tip1": "Specify years (e.g. 'fraud cases 2015–2020' or 'search all years')",
        "prompt_guide_tip2": "Use legal terms: petos, varkaus, vahingonkorvaus",
        "prompt_guide_tip3": "Ask for a case: 'Summarize KKO:2024:76'",
        "prompt_guide_tip4": "Follow-ups: agent interprets context, no fixed phrases",
        # UI enhancement keys
        "dark_mode": "Dark mode",
        "sources_heading": "Sources",
        "copy_response": "Copy",
        "copied": "Copied!",
        "feedback_helpful": "Helpful",
        "feedback_not_helpful": "Not helpful",
        "feedback_thanks": "Thank you!",
        "typing_indicator": "Thinking",
        "filters_heading": "Search filters",
        "filter_year_range": "Year range",
        "filter_court_type": "Court type",
        "filter_legal_domain": "Legal domain",
        "search_info": "Search details",
        "export_pdf": "Download as PDF",
        "export_pdf_title": "LexAI Chat Export",
        "conversations_heading": "Previous conversations",
        "new_conversation": "New conversation",
        "related_questions": "Related questions",
        "shortcuts_heading": "Keyboard shortcuts",
        "shortcut_clear": "Ctrl+L: Clear chat",
        "shortcut_focus": "Ctrl+K: Focus input",
        "delete": "Delete",
        "load": "Load",
        "no_conversations": "No saved conversations yet.",
        "filters_toggle": "Enable filters",
        "all_courts": "All courts",
        "all_domains": "All domains",
        "search_time": "Search time: {time:.1f}s",
        "results_found": "Results found: {count}",
        "channels_used": "Search channels: {channels}",
        # Ingestion keys
        "ingestion_heading": "Document Ingestion",
        "ingestion_tenant_label": "Tenant: {tenant}",
        "ingestion_tab_upload": "Upload",
        "ingestion_tab_gdrive": "Google Drive",
        "ingestion_tab_onedrive": "OneDrive",
        "ingestion_upload_label": "Upload PDF, DOCX, or TXT",
        "ingestion_ingest_btn": "Ingest",
        "ingestion_gdrive_not_configured": "Google Drive not configured.",
        "ingestion_gdrive_connect_hint": "Connect to browse files.",
        "ingestion_gdrive_connect_btn": "Connect Google Drive",
        "ingestion_gdrive_authorize": "Authorize Google Drive",
        "ingestion_onedrive_not_configured": "OneDrive not configured.",
        "ingestion_onedrive_connect_hint": "Connect to browse files.",
        "ingestion_onedrive_connect_btn": "Connect OneDrive",
        "ingestion_onedrive_authorize": "Authorize OneDrive",
        "ingestion_select_file": "Select a file",
        "ingestion_no_files": "No supported files found.",
        "ingestion_progress_start": "Starting ingestion...",
        "ingestion_progress_hashing": "Checking for duplicates...",
        "ingestion_progress_extracting": "Extracting text...",
        "ingestion_progress_chunking": "Chunking document...",
        "ingestion_progress_embedding": "Generating embeddings...",
        "ingestion_progress_storing": "Storing in database...",
        "ingestion_progress_done": "Done!",
        "ingestion_success": "Document ingested successfully ({chunks} chunks).",
        "ingestion_already_exists": "This document has already been ingested.",
        "ingestion_empty": "No text could be extracted from this document.",
        "ingestion_error": "Ingestion failed",
        "ingestion_documents_heading": "Ingested documents ({count})",
        # Drive connection & folder browser keys
        "drive_connected": "Connected",
        "drive_disconnect_btn": "Disconnect",
        "drive_disconnect_confirm": "Disconnected successfully.",
        "folder_select_heading": "Select folder",
        "folder_current": "Current folder: {folder}",
        "folder_open_btn": "Open",
        "folder_use_btn": "Use this folder",
        "folder_back_btn": "Back",
        "folder_root": "Root",
        "folder_saved": "Folder saved.",
        "folder_no_subfolders": "No subfolders found.",
        "drive_reconnect_hint": "Token may have expired. Please reconnect.",
        # UI improvement keys (phases 3-6)
        "verbose_mode": "Detailed view",
        "confidence_high": "High confidence",
        "confidence_medium": "Medium confidence",
        "confidence_low": "Low confidence",
        "workflow_heading": "How can I help?",
        "regenerate": "Regenerate",
        "contrary_authority": "Contrary authority",
        "contrary_instruction": "Also consider contrary precedents and counter-arguments.",
    },
    "fi": {
        "page_title": "LexAI - Suomalainen oikeudellinen avustaja",
        "header_title": "Suomalainen oikeudellinen p\u00e4\u00e4ttely",
        "header_subtitle": "Kysy s\u00e4\u00e4d\u00f6ksist\u00e4, oikeusk\u00e4yt\u00e4nn\u00f6st\u00e4 ja m\u00e4\u00e4r\u00e4yksist\u00e4 suomeksi tai englanniksi.",
        "ask_question": "Esit\u00e4 kysymys",
        "send": "L\u00e4het\u00e4",
        "welcome_title": "Tervetuloa",
        "welcome_body": "Esit\u00e4 kysymyksesi alla. Voin auttaa Suomen lains\u00e4\u00e4d\u00e4nn\u00f6ss\u00e4, KKO- ja KHO-oikeusk\u00e4yt\u00e4nn\u00f6ss\u00e4 sek\u00e4 oikeudellisissa m\u00e4\u00e4riteliss\u00e4 \u2014 suomeksi tai englanniksi.",
        "input_hint": "Kysy Suomen lains\u00e4\u00e4d\u00e4nn\u00f6st\u00e4 suomeksi tai englanniksi. Paina Enter l\u00e4hett\u00e4\u00e4ksesi.",
        "placeholder": "Tervetuloa! Kysy minulta Suomen lains\u00e4\u00e4d\u00e4nn\u00f6st\u00e4.",
        "settings": "Asetukset",
        "sidebar_app_name": "LexAI",
        "sidebar_tagline": "Suomen laki ja oikeusk\u00e4yt\u00e4nt\u00f6 (KKO, KHO)",
        "language": "Kieli",
        "clear_chat": "Tyhjenn\u00e4 keskustelu",
        "system": "J\u00e4rjestelm\u00e4",
        "messages_count": "Esitetyt kysymykset: {count}",
        "spinner_searching": "Haetaan tietokannasta...",
        "stream_analyzing": "Analysoidaan kysymyst\u00e4...",
        "stream_searching": "Etsit\u00e4\u00e4n tietoa...",
        "stream_reformulating": "Hakutuloksia ei l\u00f6ytynyt. Tarkennetaan hakua: '{query}'...",
        "stream_relevancy": "Relevanssi: {score}/5. {reason}",
        "stream_relevancy_short": "Relevanssi: {score}/5.",
        "stream_error": "Virhe: {error}",
        "stream_connection_error": "Virhe yhteydessä: {error}",
        "error_search_connection": "Hakutta ei saatavilla. Tarkista internetyhteytesi ja yritä uudelleen.",
        "error_search_timeout": "Hakutimeutuksen aikakatkaisu. Palvelin voi olla kuormitettu. Yritä uudelleen.",
        "error_search_api": "Hakutiedustelu epäonnistui ulkoisen palvelun virheen vuoksi. Yritä myöhemmin uudelleen.",
        "query_too_long": "Kysymys on liian pitkä (max {max} merkkiä). Lyhennä kysymystäsi.",
        "year_clarification": "Miltä vuosiluvuilta etsit tuomioistuimen päätöksiä? Anna väli (esim. 2010–2020) tai sano 'kaikki' ilman rajoitusta.",
        "templates_heading": "Esimerkkikysymykset",
        "templates_hint": "Klikkaa lis\u00e4t\u00e4ksesi sy\u00f6tt\u00f6kentt\u00e4\u00e4n \u2014 muokkaa ja paina Enter.",
        "edit_template_label": "Muokkaa kysymyst\u00e4si",
        "cancel": "Peruuta",
        "prompt_guide_title": "Kuinka kirjoittaa tehokkaita kysymyksiä",
        "prompt_guide_tip1": "Anna vuosiväli (esim. 'petostapaukset 2015–2020' tai 'kaikki vuodet')",
        "prompt_guide_tip2": "Käytä oikeustermejä: petos, varkaus, vahingonkorvaus",
        "prompt_guide_tip3": "Kysy tiettyä tapausta: 'Tiivistä KKO:2024:76'",
        "prompt_guide_tip4": "Seurauskysymykset: agentti tulkitsee kontekstin",
        # UI enhancement keys
        "dark_mode": "Tumma tila",
        "sources_heading": "L\u00e4hteet",
        "copy_response": "Kopioi",
        "copied": "Kopioitu!",
        "feedback_helpful": "Hy\u00f6dyllinen",
        "feedback_not_helpful": "Ei hy\u00f6dyllinen",
        "feedback_thanks": "Kiitos palautteesta!",
        "typing_indicator": "Miettii",
        "filters_heading": "Hakusuodattimet",
        "filter_year_range": "Vuosiv\u00e4li",
        "filter_court_type": "Tuomioistuin",
        "filter_legal_domain": "Oikeusalue",
        "search_info": "Haun tiedot",
        "export_pdf": "Lataa PDF",
        "export_pdf_title": "LexAI Keskustelu",
        "conversations_heading": "Aiemmat keskustelut",
        "new_conversation": "Uusi keskustelu",
        "related_questions": "Aiheeseen liittyvi\u00e4",
        "shortcuts_heading": "Pikan\u00e4pp\u00e4imet",
        "shortcut_clear": "Ctrl+L: Tyhjenn\u00e4",
        "shortcut_focus": "Ctrl+K: Keskity",
        "delete": "Poista",
        "load": "Avaa",
        "no_conversations": "Ei tallennettuja keskusteluja.",
        "filters_toggle": "Suodattimet k\u00e4ytt\u00f6\u00f6n",
        "all_courts": "Kaikki tuomioistuimet",
        "all_domains": "Kaikki oikeusalueet",
        "search_time": "Hakuaika: {time:.1f}s",
        "results_found": "Tuloksia: {count}",
        "channels_used": "Hakukanavat: {channels}",
        # Ingestion keys
        "ingestion_heading": "Asiakirjojen tuonti",
        "ingestion_tenant_label": "Asiakas: {tenant}",
        "ingestion_tab_upload": "Lataa",
        "ingestion_tab_gdrive": "Google Drive",
        "ingestion_tab_onedrive": "OneDrive",
        "ingestion_upload_label": "Lataa PDF, DOCX tai TXT",
        "ingestion_ingest_btn": "Tuo",
        "ingestion_gdrive_not_configured": "Google Drive ei ole m\u00e4\u00e4ritetty.",
        "ingestion_gdrive_connect_hint": "Yhdist\u00e4 selataksesi tiedostoja.",
        "ingestion_gdrive_connect_btn": "Yhdist\u00e4 Google Drive",
        "ingestion_gdrive_authorize": "Valtuuta Google Drive",
        "ingestion_onedrive_not_configured": "OneDrive ei ole m\u00e4\u00e4ritetty.",
        "ingestion_onedrive_connect_hint": "Yhdist\u00e4 selataksesi tiedostoja.",
        "ingestion_onedrive_connect_btn": "Yhdist\u00e4 OneDrive",
        "ingestion_onedrive_authorize": "Valtuuta OneDrive",
        "ingestion_select_file": "Valitse tiedosto",
        "ingestion_no_files": "Tuettuja tiedostoja ei l\u00f6ytynyt.",
        "ingestion_progress_start": "Tuonti alkaa...",
        "ingestion_progress_hashing": "Tarkistetaan kaksoiskappaleita...",
        "ingestion_progress_extracting": "Puretaan teksti\u00e4...",
        "ingestion_progress_chunking": "Pilkotaan asiakirjaa...",
        "ingestion_progress_embedding": "Luodaan upotuksia...",
        "ingestion_progress_storing": "Tallennetaan tietokantaan...",
        "ingestion_progress_done": "Valmis!",
        "ingestion_success": "Asiakirja tuotu onnistuneesti ({chunks} palaa).",
        "ingestion_already_exists": "T\u00e4m\u00e4 asiakirja on jo tuotu.",
        "ingestion_empty": "Asiakirjasta ei voitu purkaa teksti\u00e4.",
        "ingestion_error": "Tuonti ep\u00e4onnistui",
        "ingestion_documents_heading": "Tuodut asiakirjat ({count})",
        # Drive connection & folder browser keys
        "drive_connected": "Yhdistetty",
        "drive_disconnect_btn": "Katkaise yhteys",
        "drive_disconnect_confirm": "Yhteys katkaistu.",
        "folder_select_heading": "Valitse kansio",
        "folder_current": "Nykyinen kansio: {folder}",
        "folder_open_btn": "Avaa",
        "folder_use_btn": "K\u00e4yt\u00e4 t\u00e4t\u00e4 kansiota",
        "folder_back_btn": "Takaisin",
        "folder_root": "Juuri",
        "folder_saved": "Kansio tallennettu.",
        "folder_no_subfolders": "Alikansioita ei l\u00f6ytynyt.",
        "drive_reconnect_hint": "Tunnus on voinut vanhentua. Yhdist\u00e4 uudelleen.",
        # UI improvement keys (phases 3-6)
        "verbose_mode": "Tarkka n\u00e4kym\u00e4",
        "confidence_high": "Korkea luottamus",
        "confidence_medium": "Kohtalainen luottamus",
        "confidence_low": "Matala luottamus",
        "workflow_heading": "Miten voin auttaa?",
        "regenerate": "Luo uudelleen",
        "contrary_authority": "Vastakkainen oikeusk\u00e4yt\u00e4nt\u00f6",
        "contrary_instruction": "Huomioi myös vastakkaiset ennakkopäätökset ja vasta-argumentit.",
    },
    "sv": {
        "page_title": "LexAI - Finsk juridisk assistent",
        "header_title": "Finskt r\u00e4ttsligt resonemang",
        "header_subtitle": "Fr\u00e5ga om lagar, r\u00e4ttspraxis och f\u00f6rordningar p\u00e5 finska eller engelska.",
        "ask_question": "St\u00e4ll en fr\u00e5ga",
        "send": "Skicka",
        "welcome_title": "V\u00e4lkommen",
        "welcome_body": "St\u00e4ll din fr\u00e5ga nedan. Jag kan hj\u00e4lpa till med finsk lagstiftning, KKO- och KHO-r\u00e4ttspraxis samt r\u00e4ttsliga definitioner \u2014 p\u00e5 finska eller engelska.",
        "input_hint": "Fr\u00e5ga om finsk lag p\u00e5 finska eller engelska. Tryck Enter f\u00f6r att skicka.",
        "placeholder": "V\u00e4lkommen! Fr\u00e5ga mig om finsk lagstiftning.",
        "settings": "Inst\u00e4llningar",
        "sidebar_app_name": "LexAI",
        "sidebar_tagline": "Finsk lag och r\u00e4ttspraxis (KKO, KHO)",
        "language": "Spr\u00e5k",
        "clear_chat": "Rensa chatt",
        "system": "System",
        "messages_count": "St\u00e4llda fr\u00e5gor: {count}",
        "spinner_searching": "S\u00f6ker i kunskapsbasen...",
        "stream_analyzing": "Analyserar fr\u00e5gan...",
        "stream_searching": "S\u00f6ker...",
        "stream_reformulating": "Inga s\u00f6kresultat. F\u00f6rfinar s\u00f6kningen: '{query}'...",
        "stream_relevancy": "Relevans: {score}/5. {reason}",
        "stream_relevancy_short": "Relevans: {score}/5.",
        "stream_error": "Fel: {error}",
        "stream_connection_error": "Anslutningsfel: {error}",
        "error_search_connection": "Sökningen är inte tillgänglig. Kontrollera din internetanslutning och försök igen.",
        "error_search_timeout": "Sökningen tog slut på tiden. Servern kan vara upptagen. Försök igen.",
        "error_search_api": "Sökningen misslyckades på grund av ett externt tjänstfel. Försök igen senare.",
        "query_too_long": "Frågan är för lång (max {max} tecken). Förkorta din fråga.",
        "year_clarification": "Vilka år vill du söka domstolsbeslut från? Ange ett intervall (t.ex. 2010–2020) eller säg 'allt' utan filter.",
        "templates_heading": "Exempelfrågor",
        "templates_hint": "Klicka för att lägga till i fältet — redigera och tryck Enter.",
        "edit_template_label": "Redigera din fråga",
        "cancel": "Avbryt",
        "prompt_guide_title": "Hur man skriver bra frågor",
        "prompt_guide_tip1": "Ange år (t.ex. 'bedrägerimål 2015–2020' eller 'alla år')",
        "prompt_guide_tip2": "Använd juridiska termer: petos, varkaus, vahingonkorvaus",
        "prompt_guide_tip3": "Fråga om ett fall: 'Sammanfatta KKO:2024:76'",
        "prompt_guide_tip4": "Följdfrågor: agenten tolkar kontext",
        # UI enhancement keys
        "dark_mode": "Mörkt läge",
        "sources_heading": "K\u00e4llor",
        "copy_response": "Kopiera",
        "copied": "Kopierat!",
        "feedback_helpful": "Hj\u00e4lpsam",
        "feedback_not_helpful": "Inte hj\u00e4lpsam",
        "feedback_thanks": "Tack f\u00f6r feedbacken!",
        "typing_indicator": "T\u00e4nker",
        "filters_heading": "S\u00f6kfilter",
        "filter_year_range": "\u00c5rsintervall",
        "filter_court_type": "Domstolstyp",
        "filter_legal_domain": "R\u00e4ttsomr\u00e5de",
        "search_info": "S\u00f6kdetaljer",
        "export_pdf": "Ladda ner PDF",
        "export_pdf_title": "LexAI Chattexport",
        "conversations_heading": "Tidigare konversationer",
        "new_conversation": "Ny konversation",
        "related_questions": "Relaterade fr\u00e5gor",
        "shortcuts_heading": "Genv\u00e4gar",
        "shortcut_clear": "Ctrl+L: Rensa",
        "shortcut_focus": "Ctrl+K: Fokusera",
        "delete": "Ta bort",
        "load": "\u00d6ppna",
        "no_conversations": "Inga sparade konversationer \u00e4nnu.",
        "filters_toggle": "Aktivera filter",
        "all_courts": "Alla domstolar",
        "all_domains": "Alla r\u00e4ttsomr\u00e5den",
        "search_time": "S\u00f6ktid: {time:.1f}s",
        "results_found": "Resultat: {count}",
        "channels_used": "S\u00f6kkanaler: {channels}",
        # Ingestion keys
        "ingestion_heading": "Dokumentimport",
        "ingestion_tenant_label": "Klient: {tenant}",
        "ingestion_tab_upload": "Ladda upp",
        "ingestion_tab_gdrive": "Google Drive",
        "ingestion_tab_onedrive": "OneDrive",
        "ingestion_upload_label": "Ladda upp PDF, DOCX eller TXT",
        "ingestion_ingest_btn": "Importera",
        "ingestion_gdrive_not_configured": "Google Drive \u00e4r inte konfigurerat.",
        "ingestion_gdrive_connect_hint": "Anslut f\u00f6r att bl\u00e4ddra i filer.",
        "ingestion_gdrive_connect_btn": "Anslut Google Drive",
        "ingestion_gdrive_authorize": "Auktorisera Google Drive",
        "ingestion_onedrive_not_configured": "OneDrive \u00e4r inte konfigurerat.",
        "ingestion_onedrive_connect_hint": "Anslut f\u00f6r att bl\u00e4ddra i filer.",
        "ingestion_onedrive_connect_btn": "Anslut OneDrive",
        "ingestion_onedrive_authorize": "Auktorisera OneDrive",
        "ingestion_select_file": "V\u00e4lj en fil",
        "ingestion_no_files": "Inga st\u00f6dda filer hittades.",
        "ingestion_progress_start": "Startar import...",
        "ingestion_progress_hashing": "Kontrollerar dubbletter...",
        "ingestion_progress_extracting": "Extraherar text...",
        "ingestion_progress_chunking": "Delar upp dokument...",
        "ingestion_progress_embedding": "Genererar inb\u00e4ddningar...",
        "ingestion_progress_storing": "Sparar i databasen...",
        "ingestion_progress_done": "Klar!",
        "ingestion_success": "Dokument importerat ({chunks} delar).",
        "ingestion_already_exists": "Detta dokument har redan importerats.",
        "ingestion_empty": "Ingen text kunde extraheras fr\u00e5n dokumentet.",
        "ingestion_error": "Importen misslyckades",
        "ingestion_documents_heading": "Importerade dokument ({count})",
        # Drive connection & folder browser keys
        "drive_connected": "Ansluten",
        "drive_disconnect_btn": "Koppla fr\u00e5n",
        "drive_disconnect_confirm": "Fr\u00e5nkopplad.",
        "folder_select_heading": "V\u00e4lj mapp",
        "folder_current": "Aktuell mapp: {folder}",
        "folder_open_btn": "\u00d6ppna",
        "folder_use_btn": "Anv\u00e4nd denna mapp",
        "folder_back_btn": "Tillbaka",
        "folder_root": "Rot",
        "folder_saved": "Mapp sparad.",
        "folder_no_subfolders": "Inga undermappar hittades.",
        "drive_reconnect_hint": "Token kan ha g\u00e5tt ut. Anslut igen.",
        # UI improvement keys (phases 3-6)
        "verbose_mode": "Detaljerad vy",
        "confidence_high": "H\u00f6g tillf\u00f6rlitlighet",
        "confidence_medium": "Medel tillf\u00f6rlitlighet",
        "confidence_low": "L\u00e5g tillf\u00f6rlitlighet",
        "workflow_heading": "Hur kan jag hj\u00e4lpa?",
        "regenerate": "Generera om",
        "contrary_authority": "Motsatt r\u00e4ttspraxis",
        "contrary_instruction": "Beakta även motsatta prejudikat och motargument.",
    },
}

LANGUAGE_OPTIONS = {"Auto": "auto", "English": "en", "Suomi": "fi", "Svenska": "sv"}
DEFAULT_LANGUAGE = "fi"


def t(key: str, lang: str = None, **kwargs) -> str:
    if lang is None:
        lang = DEFAULT_LANGUAGE
    text = TRANSLATIONS.get(lang, TRANSLATIONS[DEFAULT_LANGUAGE]).get(key, key)
    if kwargs:
        text = text.format(**kwargs)
    return text
